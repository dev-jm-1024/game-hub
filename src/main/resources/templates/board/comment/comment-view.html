<!-- templates/fragments/comment-view.html -->
<div th:fragment="commentListFragment">
    <div id="comment-list">
        <div th:each="comment : ${commentsList}"
             class="comment-item"
             style="border: 1px solid black; padding: 10px; margin-bottom: 10px;">

            <!-- 작성자 -->
            <div class="comment-header">
                <strong class="comment-writer" th:text="${comment.user.mbNickname}">작성자</strong>
            </div>

            <!-- 댓글 내용 -->
            <div class="comment-body">
                <p class="comment-content" th:text="${comment.commentContent}">내용</p>
            </div>

            <!-- 리액션 버튼 영역 -->
            <div class="comment-reaction-buttons" style="margin: 8px 0;">
                <button type="button"
                        class="comment-like-button"
                        th:classappend="${userCommentReactionMap[comment.commentId]?.name() == 'LIKE'} ? 'liked' : ''"
                        th:data-comment-id="${comment.commentId}">
                    👍 좋아요
                    <span class="like-count"
                          th:text="${commentReactionMap[comment.commentId]?.likeCount}">0</span>
                </button>

                <button type="button"
                        class="comment-dislike-button"
                        th:classappend="${userCommentReactionMap[comment.commentId]?.name() == 'DISLIKE'} ? 'disliked' : ''"
                        th:data-comment-id="${comment.commentId}">
                    👎 싫어요
                    <span class="dislike-count"
                          th:text="${commentReactionMap[comment.commentId]?.dislikeCount}">0</span>
                </button>
            </div>

            <!-- 하단 정보 -->
            <div class="comment-footer" style="font-size: 12px; color: #666;">
                <span class="comment-date"
                      th:text="${#temporals.format(comment.createdAt, 'yyyy-MM-dd')}">날짜</span>
            </div>
        </div>
    </div>
</div>
