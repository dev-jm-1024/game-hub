<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
</head>
<body>
<!-- 게임 카드 공통 Fragment -->
<div th:fragment="game-card(game, statusBadgeClass, statusText, showApprovedDate, showPlayButton, showEditButton)" class="game-card">
  <!-- 요약 정보 -->
  <div class="d-flex justify-content-between align-items-start">
    <div class="flex-grow-1">
      <div class="game-title" th:text="${game.gameName}">게임 이름</div>
      <div class="game-meta">
        <i class="fas fa-users me-1"></i><span th:text="${game.teamName}">팀 이름</span>
        <span class="mx-2">•</span>
        <i class="fas fa-calendar me-1"></i><span th:text="${formatter.formatDateTime(game.createdAt)}">업로드 날짜</span>
        <span class="mx-2">•</span>
        <i class="fas fa-file me-1"></i><span th:text="${game.originalFilename}">파일명</span>
        <span th:if="${showApprovedDate and game.approvedAt != null}" class="mx-2">•</span>
        <span th:if="${showApprovedDate and game.approvedAt != null}">
                        <i class="fas fa-check-circle text-success me-1"></i><span th:text="${formatter.formatDateTime(game.approvedAt)}">승인 날짜</span>
                    </span>
      </div>
    </div>
    <div class="d-flex align-items-center">
      <span th:class="'status-badge ' + ${statusBadgeClass} + ' me-2'" th:text="${statusText}">상태</span>

      <!-- 플레이 버튼 (활성 게임만) -->
      <a th:if="${showPlayButton and game.fileStatus == T(kr.plusb3b.games.gamehub.domain.game.entity.GamesFile.FileStatus).ACTIVE and game.visible}"
         th:href="${game.gameUrl}" target="_blank" class="btn btn-sm btn-success me-2">
        <i class="fas fa-play me-1"></i>플레이
      </a>

      <!-- 수정 버튼 (거부된 게임만) -->
      <button th:if="${showEditButton}" class="btn btn-sm btn-outline-primary me-2">
        <i class="fas fa-edit me-1"></i>수정하기
      </button>

      <button class="details-btn" onclick="toggleDetails(this)">
        <i class="fas fa-chevron-down me-1"></i>상세보기
      </button>
    </div>
  </div>

  <!-- 세부 정보 (숨겨짐) -->
  <div class="game-details" style="display: none;">
    <div class="row">
      <div class="col-md-6">
        <div class="detail-row">
          <span class="detail-label">사용자 ID:</span>
          <span class="detail-value" th:text="${game.userId}">사용자ID</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">게임 버전:</span>
          <span class="detail-value" th:text="${game.gameVersion}">버전</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">장르:</span>
          <span class="detail-value" th:text="${game.genre}">장르</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">플랫폼:</span>
          <span class="detail-value" th:text="${game.platform}">플랫폼</span>
        </div>
        <div th:if="${showApprovedDate and game.approvedAt != null}" class="detail-row">
          <span class="detail-label">승인 날짜:</span>
          <span class="detail-value text-success" th:text="${formatter.formatDateTime(game.approvedAt)}">승인날짜</span>
        </div>
      </div>
      <div class="col-md-6">
        <div class="detail-row">
          <span class="detail-label">파일 크기:</span>
          <span class="detail-value" th:text="${formatter.formatFileSize(game.fileSize)}">파일크기</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">노출 여부:</span>
          <span th:class="'detail-value' + (${game.visible} ? ' text-success' : '')" th:text="${game.visible} ? '노출' : '숨김'">노출여부</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">파일 상태:</span>
          <span th:class="'detail-value' + (${game.fileStatus == T(kr.plusb3b.games.gamehub.domain.game.entity.GamesFile.FileStatus).ACTIVE} ? ' text-success' : '')" th:text="${game.fileStatus}">파일상태</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">게임 URL:</span>
          <span class="detail-value text-truncate">
                            <a th:if="${showPlayButton and game.gameUrl != null}"
                               th:href="${game.gameUrl}" target="_blank" class="text-primary text-decoration-none">
                                <i class="fas fa-external-link-alt me-1"></i>게임 열기
                            </a>
                            <span th:unless="${showPlayButton and game.gameUrl != null}" th:text="${game.gameUrl}">URL</span>
                        </span>
        </div>
      </div>
    </div>
    <div class="detail-row mt-2" th:if="${game.gameDescription}">
      <span class="detail-label">게임 설명:</span>
      <span class="detail-value" th:text="${game.gameDescription}">설명</span>
    </div>
    <div class="detail-row" th:if="${game.specs}">
      <span class="detail-label">권장 사양:</span>
      <span class="detail-value" th:text="${game.specs}">사양</span>
    </div>
  </div>
</div>
</body>
</html>