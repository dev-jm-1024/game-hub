<!--header-frag-->
<header th:fragment="header" class="site-header">
    <!-- 사이트 로고 -->
    <div class="site-logo">
        <a href="/" title="홈으로" aria-label="사이트 홈으로 이동">
            <img src="https://plusb3b.kr/gamehub-img/logo.png" alt="GameHub Logo" class="logo">
        </a>
    </div>

    <!-- 간단한 네비게이션 -->
    <nav class="main-nav" role="navigation" aria-label="주요 메뉴">
        <ul class="nav-menu" role="menubar">
            <!-- 게임 -->
            <li class="nav-item has-dropdown" role="none">
                <a href="#" class="nav-link dropdown-trigger" role="menuitem" aria-expanded="false" aria-haspopup="true">
                    <span class="nav-text">게임</span>
                    <svg class="dropdown-icon" width="12" height="12" viewBox="0 0 12 12" fill="none">
                        <path d="M6 8l-3-3h6l-3 3z"/>
                    </svg>
                </a>
                <ul class="dropdown-menu" role="menu">
                    <li class="dropdown-item" role="none">
                        <a href="/games" class="dropdown-link" role="menuitem">🎮 게임 목록</a>
                    </li>
                    <li class="dropdown-item" role="none">
                        <a href="/prod" class="dropdown-link" role="menuitem">📤 게임 업로드</a>
                    </li>
                    <li class="dropdown-item" role="none">
                        <a href="/favorites" class="dropdown-link" role="menuitem">⭐ 즐겨찾기</a>
                    </li>
                </ul>
            </li>

            <!-- 커뮤니티 -->
            <li class="nav-item has-dropdown" role="none">
                <a href="#" class="nav-link dropdown-trigger" role="menuitem" aria-expanded="false" aria-haspopup="true">
                    <span class="nav-text">커뮤니티</span>
                    <svg class="dropdown-icon" width="12" height="12" viewBox="0 0 12 12" fill="none">
                        <path d="M6 8l-3-3h6l-3 3z"/>
                    </svg>
                </a>
                <ul class="dropdown-menu" role="menu">
                    <li class="dropdown-item" role="none">
                        <a href="/board" class="dropdown-link" role="menuitem">📋 전체 게시판</a>
                    </li>
                    <li class="dropdown-separator" role="none"></li>
                    <li class="dropdown-item" role="none" th:each="board : ${boardList}">
                        <a
                                th:href="@{'/board/' + ${board.boardId} + '/view'}"
                                th:text="${board.boardName}"
                                class="dropdown-link"
                                role="menuitem"
                        >
                            게시판 이름</a>
                    </li>
                </ul>
            </li>

            <!-- 마이페이지 -->
            <li class="nav-item has-dropdown" role="none" th:if="${isLoggedIn == true}">
                <a href="#" class="nav-link dropdown-trigger" role="menuitem" aria-expanded="false" aria-haspopup="true">
                    <span class="nav-text">마이페이지</span>
                    <svg class="dropdown-icon" width="12" height="12" viewBox="0 0 12 12" fill="none">
                        <path d="M6 8l-3-3h6l-3 3z"/>
                    </svg>
                </a>
                <ul class="dropdown-menu" role="menu">
                    <li class="dropdown-item" role="none">
                        <a href="/my-page/edit-profile" class="dropdown-link" role="menuitem">👤 프로필 수정</a>
                    </li>
                    <li class="dropdown-item" role="none">
                        <a href="/my-page/games" class="dropdown-link" role="menuitem">🎯 내 게임</a>
                    </li>
                    <li class="dropdown-item" role="none">
                        <a href="/my-page/posts" class="dropdown-link" role="menuitem">📝 내 게시글</a>
                    </li>
                    <li class="dropdown-item" role="none">
                        <a href="/my-page/settings" class="dropdown-link" role="menuitem">⚙️ 설정</a>
                    </li>
                </ul>
            </li>
        </ul>
    </nav>

    <!-- 사용자 영역 (간소화) -->
    <div class="user-actions">
        <!-- 로그인/회원가입 드롭다운 -->
        <div class="auth-dropdown has-dropdown">

            <!-- 로그인을 했을 경우 -->
            <button class="auth-trigger dropdown-trigger" aria-expanded="false" aria-haspopup="true" >
                <span>계정</span>
                <svg class="dropdown-icon" width="12" height="12" viewBox="0 0 12 12" fill="none">
                    <path d="M6 8l-3-3h6l-3 3z"/>
                </svg>
            </button>

            <!-- 로그인 안 한 경우 -->
            <ul class="dropdown-menu auth-menu" role="menu">
                <li class="dropdown-item" role="none" th:if="${isLoggedIn == false}">
                    <a href="/game-hub/login" class="dropdown-link" role="menuitem">🔑 로그인</a>
                </li>
                <li class="dropdown-item" role="none" th:if="${isLoggedIn == false}">
                    <a href="/game-hub/join" class="dropdown-link" role="menuitem">📝 회원가입</a>
                </li>
                <li class="dropdown-item" role="none" th:if="${isLoggedIn == false}"><!-- 권한으로 분리해야할 듯 -->
                    <a href="/game-hub/join-prod" class="dropdown-link" role="menuitem">👥 팀 회원가입</a>
                </li>

                <li class="dropdown-item" role="none" th:if="${isLoggedIn == true}">
                    <a href="/my-page/edit-profile" class="dropdown-link" role="menuitem">계정 설정</a>
                </li>
                <li class="dropdown-item" role="none" th:if="${isLoggedIn == true}">
                    <a href="/logout" class="dropdown-link" role="menuitem">로그아웃</a>
                </li>
            </ul>
        </div>

        <!-- 관리자 메뉴 (조건부 표시) -->
        <div class="admin-dropdown has-dropdown" style="display: none;" >
            <button class="admin-trigger dropdown-trigger" aria-expanded="false" aria-haspopup="true">
                <span>관리자</span>
                <span class="admin-badge">Admin</span>
            </button>
            <ul class="dropdown-menu admin-menu" role="menu">
                <li class="dropdown-item" role="none">
                    <a href="/admin" class="dropdown-link" role="menuitem">🛠️ 관리자 패널</a>
                </li>
                <li class="dropdown-item" role="none">
                    <a href="/admin/users" class="dropdown-link" role="menuitem">👥 사용자 관리</a>
                </li>
                <li class="dropdown-item" role="none">
                    <a href="/admin/games" class="dropdown-link" role="menuitem">🎮 게임 관리</a>
                </li>
            </ul>
        </div>
    </div>

    <!-- 모바일 메뉴 버튼 -->
    <button class="mobile-menu-btn" aria-expanded="false" aria-label="모바일 메뉴">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
    </button>
</header>

<!-- 검색창 (헤더 바로 아래) -->
<div class="search-section">
    <div class="search-container">
        <form class="search-form" action="/search" method="get" role="search">
            <div class="search-input-wrapper">
                <svg class="search-icon" width="20" height="20" viewBox="0 0 16 16" fill="none">
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                </svg>
                <input type="text" id="search-input" name="q" placeholder="게임, 게시글을 검색해보세요..." aria-label="검색어 입력" autocomplete="off">
                <button type="submit" class="search-submit" aria-label="검색 실행">
                    <svg width="18" height="18" viewBox="0 0 16 16" fill="none">
                        <path d="M6 2l6 6-6 6"/>
                    </svg>
                </button>
            </div>
        </form>
    </div>
</div>
